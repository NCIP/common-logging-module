<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE beans PUBLIC "-//SPRING//DTD BEAN//EN" "http://www.springframework.org/dtd/spring-beans.dtd">

<beans>

	<!-- 						-->
	<!-- Persistence Layer Objects -->
	<!-- 						-->
	
	<bean name="LogMessageDAO" class="gov.nih.nci.logging.api.persistence.LogMessageDAOImpl">
		<property name="sessionFactory">
			<ref bean="HibernateSessionFactory"/>
		</property>
	</bean>
	
	
	<!-- 					-->
	<!-- Datasource mapping -->
	<!-- 					-->
	
	
	<!-- !!	NOTE:
		The beans 'CLMConnectionPoolDS' and 'CLMJndiDS' are placeholders only. The properties 
		defined for these beans are overriden by the properties provided in the clm.properties 
		file available in the classpath. Refer the clm.properties file available in the distribution.
	-->
	<bean id="CLMConnectionPoolDS" class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close">
		<property name="url" value="jdbc:mysql://HOST:3306/clm DEFAULT URL"/>
		<property name="username" value="DefaultUserName"/>
		<property name="password" value="DefaultPassword"/>
		<property name="driverClassName" value="org.gjt.mm.mysql.Driver"/>
	</bean>
	<bean id="CLMDJndiDS"	class="org.springframework.jndi.JndiObjectFactoryBean">
		<property name="jndiName" value="java:CLMDS_example_DS" />
	</bean>


	
	<!-- 						-->
	<!-- Hibernate configuration -->
 	<!-- 						-->

	<bean id="HibernateSessionFactory" class="org.springframework.orm.hibernate3.LocalSessionFactoryBean">
		<property name="dataSource" ref="CLMConnectionPoolDS"/> 
		<property name="mappingResources">
			<list>
				<value>gov/nih/nci/logging/api/domain/LogMessage.hbm.xml</value>
				<value>gov/nih/nci/logging/api/domain/ObjectAttribute.hbm.xml</value>
			</list>
		</property>
		<property name="hibernateProperties">
			<props>
				<prop key="hibernate.dialect">org.hibernate.dialect.MySQLDialect</prop>
				<prop key="show_sql">false</prop>
				<prop key="jdbc.batch_size">30</prop>
			</props>
		</property>
	</bean>

</beans>